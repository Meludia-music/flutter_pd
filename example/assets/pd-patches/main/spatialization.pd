#N canvas 511 123 720 847 12;
#X declare -path ../lib/binauralModeled-pd/;
#X msg 42 120 start;
#X obj 42 34 tgl 25 0 empty empty empty 17 7 0 10 #191919 #e1e1e1 #e1e1e1 0 1;
#X obj 42 91 t b b, f 10;
#X obj 42 176 readsf~ 1 1e+06;
#X text 473 33 The "binauralModeled-ircam" object is a pure-vanilla implementation of the binaural model created by IRCAM: https://github.com/Ircam-RnD/binauralModeled/tree/gh-pages;
#X text 473 89 Basically \, it applies ITD and approximates the HRTF to a series of biquad filters \, whose coefficients are avaliable at: https://github.com/Ircam-RnD/binauralModeled/blob/gh-pages/examples/snd/complete_hrtf_modeled.js;
#X text 473 189 There is no interpolation in space (between datapoints): the chosen set of coefficients for the HRTF is the closest datapoint to the given azimuth and elevation (by euclidean distance).;
#X text 473 249 There is interpolation in time (so that a moving source sound smooth): two binauralModels run concurrently \, and the transition is made by alternating which one to use (previous/current). That transition occurs in 20ms \, whenever a new location is received.;
#X text 473 328 You can control the Azimuth and Elevation through the interface \, or pass them as argument to the first inlet.;
#X text 473 370 Obs.: If the Azimuth and elevation does not match exactly the coordinates of a point in the dataset of HRTFs \, the object will perform a search by distance \, which is not optimal. Therefore \, if this object is embedded in a higher level application and you are concerned about performance \, you should implement a k-d tree search in order to find the exact datapoint before passing it to the "binauralModeled-ircam" object.;
#X text 473 489 It makes more sense to spatialize a mono audio signal (connect audio to both inputs) \, but you can also treat the input as stereo \, if you wish.;
#X text 473 160 Sample Rate: those coefficients work for audio at 44100Hz only!;
#X obj 42 644 dac~, f 11;
#X obj 65 528 vsl 14 67 0 1 0 1 empty empty empty 0 -9 0 10 #191919 #e1e1e1 #e1e1e1 660 1;
#X obj 141 -9 loadbang;
#X msg 142 41 1;
#X obj 258 190 r azimuth;
#X msg 141 141 open ../lib/binauralModeled-pd/wood_block_mono.wav;
#X obj 189 750 declare -path ../lib/binauralModeled-pd/;
#X obj 42 320 binauralModeled-ircam;
#X obj 42 610 *~ 0.1;
#X obj 96 610 *~ 0.1;
#X msg 203 64 0.1;
#X obj 232 32 del 100;
#X obj 149 20 del 500;
#X obj 406 157 loadbang;
#X msg 406 190 0 0;
#X obj 292 220 r elevation;
#X obj 258 290 pack f f;
#X obj 292 250 t b f;
#X msg 93 120 open ../lib/binauralModeled-pd/breakbeat.wav;
#X obj 42 64 metro 3705;
#X connect 0 0 3 0;
#X connect 1 0 31 0;
#X connect 2 0 0 0;
#X connect 2 1 30 0;
#X connect 3 0 19 0;
#X connect 3 0 19 1;
#X connect 13 0 20 1;
#X connect 13 0 21 1;
#X connect 14 0 23 0;
#X connect 14 0 24 0;
#X connect 15 0 1 0;
#X connect 16 0 28 0;
#X connect 17 0 3 0;
#X connect 19 0 20 0;
#X connect 19 1 21 0;
#X connect 20 0 12 0;
#X connect 21 0 12 1;
#X connect 22 0 13 0;
#X connect 23 0 22 0;
#X connect 24 0 15 0;
#X connect 25 0 26 0;
#X connect 26 0 28 0;
#X connect 27 0 29 0;
#X connect 28 0 19 2;
#X connect 29 0 28 0;
#X connect 29 1 28 1;
#X connect 30 0 3 0;
#X connect 31 0 2 0;
